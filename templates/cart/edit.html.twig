{% extends 'base.html.twig' %}

{% block title %}Edit Cart{% endblock %}

{% block body %}
    <h1>Edit Cart</h1>

    {{ include('cart/_form.html.twig', {'button_label': 'Update'}) }}

    <a href="{{ path('app_cart_index') }}">back to list</a>

    {{ include('cart/_delete_form.html.twig') }}
     <script>
        function validateArtRef() {
            var artRef = document.getElementById('cart_artRef').value; // Assuming 'cart_artRef' is the ID of the artRef field
            // Check if artRef exists in the database using AJAX
            // Example AJAX request using fetch API
            fetch('/check-art', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ artRef: artRef }),
            })
            .then(response => {
                if (!response.ok) {
                    // Show pop-up message if artRef doesn't exist
                    alert('ArtRef does not exist in the database!');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
{% endblock %}
