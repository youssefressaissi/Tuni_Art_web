{% extends 'base.html.twig' %}

{% block title %}Users
{% endblock %}

{% block body %}
	<div class="row mb-3">
		<div class="col-md-12">
			<h1 class="title">Active Users</h1>
		</div>
	</div>
	<div class="container">
		{% for chunk in usersWithoutAdmins|batch(3) %}
			<div class="row">
				{% for user in chunk %}
					<div class="col-md-4 mb-4">
						<a href="{{ path('app_user_show', {'uid': user.uid}) }}" style="text-decoration: none;">
							<div class="article-card" style="margin-bottom: 20px; margin-left: 10px; margin-right: 10px;">
								<div class="content">
									<h5 class="arttitle">{{ user.fname ~ ' ' ~ user.lname }}</h5>
									<div class="row">
										<div class="col-md-6">
											<p class="arttext" style="margin-left: 40px;">
												{{ user.role }}</p>
										</div>

									</div>

									<div class="row">
										<div class="col-md-6">
											<a href="{{ path('app_user_qrcode', {'uid': user.uid}) }}" class="btn btn-success">Generate QR Code</a>
										</div>
									</div>

								</div>
								{% set defaultImagePath = 'assets/images/profilepics/default.jpg' %}
								{% set ImagePath = 'assets/images/profilepics/' ~ user.profilePic %}

								{% if user.profilePic is not null %}
									<img src="{{ asset(ImagePath) }}" alt="{{ user.profilePic }}"/>
								{% else %}
									<img src="{{ asset(defaultImagePath) }}" alt="Default Image"/>
								{% endif %}

							</div>
						</a>
					</div>
				{% endfor %}
			</div>
		{% endfor %}

	</div>
	<script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/qrcode.min.js"></script>

{% endblock %}
